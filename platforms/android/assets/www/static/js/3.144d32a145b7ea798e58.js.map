{"version":3,"sources":["webpack:///static/js/3.144d32a145b7ea798e58.js","webpack:///./src/views/Login.vue","webpack:///./src/views/validator_mixin.js?9d68*","webpack:///FbCountdown.vue","webpack:///./src/assets/images/logo.jpg","webpack:///./src/components/FbCountdown.vue","webpack:///./src/components/FbCountdown.vue?abcb","webpack:///Login.vue","webpack:///./src/views/Login.vue?ff69","webpack:///./src/views/Login.vue?a343","webpack:///./src/views/Login.vue?4c35"],"names":["webpackJsonp","329","module","exports","__webpack_require__","Component","342","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0_simple_vue_validator__","__WEBPACK_IMPORTED_MODULE_0_simple_vue_validator___default","n","Validator","a","methods","validate","value","getFieldState","field","this","validation","hasError","isPassed","showFieldError","event","et","target","classList","contains","parentNode","$root","toast","firstError","347","Object","defineProperty","start","_self","handle","setInterval","second","end","clearInterval","$emit","data","353","p","354","356","render","_vm","_h","$createElement","_c","_v","_s","staticRenderFns","361","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","__WEBPACK_IMPORTED_MODULE_1__components_FbCountdown_vue__","__WEBPACK_IMPORTED_MODULE_1__components_FbCountdown_vue___default","__WEBPACK_IMPORTED_MODULE_2__validator_mixin_js__","__WEBPACK_IMPORTED_MODULE_3__constants_js__","__WEBPACK_IMPORTED_MODULE_4_vuex__","__WEBPACK_IMPORTED_MODULE_5__store__","components","FbCountdown","mixins","validators","user.phone","required","digit","regex","user.code","length","beforeRouteEnter","to","from","next","query","accesstoken","dispatch","then","name","mounted","$route","openid","user","phone","$store","getters","i","submit","_this","$validate","success","login","$router","push","toGetMsgCode","_this2","getMsgCode","ret","OK","countdownVisible","$refs","fnCountdown","onCountdownOver","UserinfoValLogin","integraluserlevel","code","381","395","content","locals","416","_m","staticClass","on","$event","preventDefault","attrs","label","placeholder","state","nativeOn","click","model","callback","$$v","expression","type","disabled","stopPropagation","directives","rawName","ref","countdown-over","size","src"],"mappings":"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","file":"static/js/3.144d32a145b7ea798e58.js","sourcesContent":["webpackJsonp([3,17],{\n\n/***/ 329:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(395)\n\nvar Component = __webpack_require__(59)(\n  /* script */\n  __webpack_require__(361),\n  /* template */\n  __webpack_require__(416),\n  /* scopeId */\n  \"data-v-66d2fb3a\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 342:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_simple_vue_validator__ = __webpack_require__(62);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_simple_vue_validator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_simple_vue_validator__);\n\nvar Validator = __WEBPACK_IMPORTED_MODULE_0_simple_vue_validator___default.a.Validator;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = {\n  methods: {\n    Validator: Validator,\n    validate: Validator.value,\n    getFieldState: function getFieldState(field) {\n      if (this.validation.hasError(field)) {\n        return 'error';\n      } else if (this.validation.isPassed(field)) {\n        return 'success';\n      }\n      return '';\n    },\n    showFieldError: function showFieldError(event, field) {\n      var et = event.target;\n      if (et.classList.contains('mintui-field-error') && et.parentNode.classList.contains('mint-field-state')) {\n        this.$root.toast(this.validation.firstError(field), 'error');\n      }\n    }\n  }\n};\n\n/***/ }),\n\n/***/ 347:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = {\n  methods: {\n    start: function start() {\n      var _self = this;\n      this.handle = setInterval(function countDown() {\n        if (_self.second > 0) {\n          _self.second -= 1;\n        } else {\n          _self.end();\n        }\n      }, 1000);\n    },\n    end: function end() {\n      clearInterval(this.handle);\n      this.second = 59;\n      this.$emit('countdown-over');\n    }\n  },\n\n  data: function data() {\n    return {\n      handle: null,\n      second: 59\n    };\n  }\n};\n\n/***/ }),\n\n/***/ 353:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/img/logo.9d5ffe3.jpg\";\n\n/***/ }),\n\n/***/ 354:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(59)(\n  /* script */\n  __webpack_require__(347),\n  /* template */\n  __webpack_require__(356),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 356:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('small', [_vm._v(_vm._s(_vm.second) + \" 秒后重发\")])\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 361:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(60);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_FbCountdown_vue__ = __webpack_require__(354);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_FbCountdown_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__components_FbCountdown_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__validator_mixin_js__ = __webpack_require__(342);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__constants_js__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_vuex__ = __webpack_require__(61);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__store__ = __webpack_require__(24);\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = {\n  components: {\n    FbCountdown: __WEBPACK_IMPORTED_MODULE_1__components_FbCountdown_vue___default.a\n  },\n  mixins: [__WEBPACK_IMPORTED_MODULE_2__validator_mixin_js__[\"a\" /* default */]],\n  validators: {\n    'user.phone': function userPhone(value) {\n      return this.validate(value).required('请输入手机号').digit('请正确输入手机号').regex('^1[3-9]\\\\d{9}$', '请正确输入手机号');\n    },\n    'user.code': function userCode(value) {\n      return this.validate(value).required('请输入验证码').digit('请正确输入验证码').length(6, '请正确输入验证码');\n    }\n  },\n\n  beforeRouteEnter: function beforeRouteEnter(to, from, next) {\n    if (to.query.accesstoken) {\n      to.query.accesstoken;\n      __WEBPACK_IMPORTED_MODULE_5__store__[\"a\" /* default */].dispatch('updateToken', to.query.accesstoken);\n      __WEBPACK_IMPORTED_MODULE_5__store__[\"a\" /* default */].dispatch('getUser').then(function (data) {\n        next({\n          name: to.query.to || 'authorizedTip'\n        });\n      });\n    } else {\n      next();\n    }\n  },\n  mounted: function mounted() {\n    this.$route.query.openid && (this.user.openid = this.$route.query.openid);\n    this.user.phone = this.$store.getters.user.phone || '';\n  },\n\n\n  methods: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_4_vuex__[\"a\" /* mapActions */])(['login', 'getMsgCode', 'getUser', 'updateToken']), {\n    submit: function submit() {\n      var _this = this;\n\n      this.$validate().then(function (success) {\n        if (success) {\n          _this.login(_this.user).then(function (data) {\n            _this.$router.push({\n              name: 'authorizedTip'\n            });\n          });\n        } else {\n          _this.$root.toast(_this.validation.firstError(), 'error');\n        }\n      });\n    },\n    toGetMsgCode: function toGetMsgCode() {\n      var _this2 = this;\n\n      this.$validate('user.phone').then(function (success) {\n        if (success) {\n          _this2.getMsgCode(_this2.user.phone).then(function (data) {\n            if (data.ret === __WEBPACK_IMPORTED_MODULE_3__constants_js__[\"a\" /* RET_CODE_MAP */].OK) {\n              _this2.countdownVisible = true;\n              _this2.$refs.fnCountdown.start();\n            }\n          });\n        } else {\n          _this2.$root.toast(_this2.validation.firstError('user.phone'), 'error');\n        }\n      });\n    },\n    onCountdownOver: function onCountdownOver() {\n      this.countdownVisible = false;\n    }\n  }),\n\n  data: function data() {\n    return {\n      countdownVisible: false,\n      user: {\n        UserinfoValLogin: {},\n        integraluserlevel: {},\n        phone: '',\n        code: ''\n      }\n    };\n  }\n};\n\n/***/ }),\n\n/***/ 381:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(324)();\n// imports\n\n\n// module\nexports.push([module.i, \".logo[data-v-66d2fb3a]{background:#fff}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 395:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(381);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(325)(\"0d554c54\", content, true);\n// Hot Module Replacement\nif(false) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"autoprefixer\\\":false,\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-66d2fb3a&scoped=true!../../node_modules/sass-loader/index.js?{\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Login.vue\", function() {\n     var newContent = require(\"!!../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"autoprefixer\\\":false,\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-66d2fb3a&scoped=true!../../node_modules/sass-loader/index.js?{\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Login.vue\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}\n\n/***/ }),\n\n/***/ 416:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('section', [_vm._m(0), _c('form', {\n    staticClass: \"login-form\",\n    on: {\n      \"submit\": function($event) {\n        $event.preventDefault();\n        _vm.submit()\n      }\n    }\n  }, [_c('div', {\n    staticClass: \"fields\"\n  }, [_c('mt-field', {\n    attrs: {\n      \"label\": \"\",\n      \"placeholder\": \"请输入手机号\",\n      \"state\": _vm.getFieldState('user.phone')\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.showFieldError($event, 'user.phone')\n      }\n    },\n    model: {\n      value: (_vm.user.phone),\n      callback: function($$v) {\n        _vm.user.phone = $$v\n      },\n      expression: \"user.phone\"\n    }\n  }), _c('mt-field', {\n    attrs: {\n      \"label\": \"\",\n      \"placeholder\": \"请输入验证码\",\n      \"state\": _vm.getFieldState('user.code')\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.showFieldError($event, 'user.code')\n      }\n    },\n    model: {\n      value: (_vm.user.code),\n      callback: function($$v) {\n        _vm.user.code = $$v\n      },\n      expression: \"user.code\"\n    }\n  }, [_c('mt-button', {\n    attrs: {\n      \"type\": \"default\",\n      \"disabled\": _vm.countdownVisible\n    },\n    on: {\n      \"click\": function($event) {\n        $event.stopPropagation();\n        $event.preventDefault();\n        _vm.toGetMsgCode()\n      }\n    }\n  }, [_c('span', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.countdownVisible),\n      expression: \"!countdownVisible\"\n    }]\n  }, [_vm._v(\"发送验证码\")]), _c('fb-countdown', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.countdownVisible),\n      expression: \"countdownVisible\"\n    }],\n    ref: \"fnCountdown\",\n    on: {\n      \"countdown-over\": function($event) {\n        _vm.onCountdownOver()\n      }\n    }\n  })], 1)], 1)], 1), _c('div', {\n    staticClass: \"form-buttons\"\n  }, [_c('mt-button', {\n    staticClass: \"mint-button-block\",\n    attrs: {\n      \"type\": \"primary\",\n      \"size\": \"large\"\n    }\n  }, [_vm._v(\"登录\")])], 1)])])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"logo\"\n  }, [_c('img', {\n    attrs: {\n      \"src\": __webpack_require__(353)\n    }\n  }), _c('small', [_vm._v(\"免审核借款1000元\")])])\n}]}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/3.144d32a145b7ea798e58.js","\n/* styles */\nrequire(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"autoprefixer\\\":false,\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/style-rewriter?id=data-v-66d2fb3a&scoped=true!sass-loader?{\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Login.vue\")\n\nvar Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Login.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler?id=data-v-66d2fb3a!../../node_modules/vue-loader/lib/template-loader?raw&engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Login.vue\"),\n  /* scopeId */\n  \"data-v-66d2fb3a\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/Login.vue\n// module id = 329\n// module chunks = 3","import SimpleVueValidation from 'simple-vue-validator'\nconst Validator = SimpleVueValidation.Validator\n\nexport default {\n  methods: {\n    Validator,\n    validate: Validator.value,\n    getFieldState(field) {\n      if (this.validation.hasError(field)) {\n        return 'error'\n      } else if (this.validation.isPassed(field)) {\n        return 'success'\n      }\n      return ''\n    },\n    showFieldError(event, field) {\n      const et = event.target\n      if (et.classList.contains('mintui-field-error') && et.parentNode.classList.contains('mint-field-state')) {\n        this.$root.toast(this.validation.firstError(field), 'error')\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/views/validator_mixin.js","<template lang=\"pug\">\nsmall {{second}} 秒后重发\n</template>\n\n<script>\nexport default {\n  methods: {\n    start() {\n      const _self = this\n      this.handle = setInterval(function countDown() {\n        if (_self.second > 0) {\n          _self.second -= 1\n        } else {\n          _self.end()\n        }\n      }, 1000)\n    },\n    end() {\n      clearInterval(this.handle)\n      this.second = 59\n      this.$emit('countdown-over')\n    }\n  },\n\n  data() {\n    return {\n      handle: null,\n      second: 59\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// FbCountdown.vue?646832a2","module.exports = __webpack_public_path__ + \"static/img/logo.9d5ffe3.jpg\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/logo.jpg\n// module id = 353\n// module chunks = 3 9","var Component = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./FbCountdown.vue\"),\n  /* template */\n  require(\"!!../../node_modules/vue-loader/lib/template-compiler?id=data-v-0e8c6c91!../../node_modules/vue-loader/lib/template-loader?raw&engine=pug!../../node_modules/vue-loader/lib/selector?type=template&index=0!./FbCountdown.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/FbCountdown.vue\n// module id = 354\n// module chunks = 3 4","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('small', [_vm._v(_vm._s(_vm.second) + \" 秒后重发\")])\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-0e8c6c91!./~/vue-loader/lib/template-loader.js?raw&engine=pug!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/FbCountdown.vue\n// module id = 356\n// module chunks = 3 4","<template lang=\"pug\">\nsection\n  div.logo\n    img(src='../assets/images/logo.jpg')\n    small 免审核借款1000元\n  form.login-form(@submit.prevent='submit()')\n    .fields\n      mt-field(label='', placeholder='请输入手机号', v-model='user.phone', :state=\"getFieldState('user.phone')\", @click.native=\"showFieldError($event, 'user.phone')\")\n      mt-field(label='', placeholder='请输入验证码', v-model='user.code', :state=\"getFieldState('user.code')\", @click.native=\"showFieldError($event, 'user.code')\")\n        mt-button(type='default', @click.stop.prevent='toGetMsgCode()', :disabled='countdownVisible')\n          span(v-show='!countdownVisible') 发送验证码\n          fb-countdown(ref='fnCountdown', v-show='countdownVisible', @countdown-over='onCountdownOver()')\n    .form-buttons\n        mt-button.mint-button-block(type='primary', size='large') 登录\n</template>\n\n<script>\nimport FbCountdown from '../components/FbCountdown.vue'\nimport ValidatorMixin from './validator_mixin.js'\nimport {\n  RET_CODE_MAP\n} from '../constants.js'\nimport {\n  mapActions\n} from 'vuex'\nimport store from '../store'\n\nexport default {\n  components: {\n    FbCountdown\n  },\n  mixins: [ValidatorMixin],\n  validators: {\n    'user.phone' (value) {\n      return this.validate(value).required('请输入手机号').digit('请正确输入手机号').regex('^1[3-9]\\\\d{9}$', '请正确输入手机号')\n    },\n    'user.code' (value) {\n      return this.validate(value).required('请输入验证码').digit('请正确输入验证码').length(6, '请正确输入验证码')\n    }\n  },\n\n  beforeRouteEnter(to, from, next) {\n    if (to.query.accesstoken) {\n      (to.query.accesstoken)\n      store.dispatch('updateToken', to.query.accesstoken)\n      store.dispatch('getUser').then(data => {\n        next({\n          name: to.query.to || 'authorizedTip'\n        })\n      })\n    } else {\n      next()\n    }\n  },\n\n  mounted() {\n    this.$route.query.openid && (this.user.openid = this.$route.query.openid) // eslint-disable-line\n    this.user.phone = this.$store.getters.user.phone || ''\n  },\n\n  methods: {\n    ...mapActions(['login', 'getMsgCode', 'getUser', 'updateToken']),\n    submit() {\n      this.$validate().then(success => {\n        if (success) {\n          this.login(this.user).then(data => {\n            this.$router.push({\n              name: 'authorizedTip'\n            })\n          })\n        } else {\n          this.$root.toast(this.validation.firstError(), 'error')\n        }\n      })\n    },\n\n    // 获取验证码\n    toGetMsgCode() {\n      this.$validate('user.phone').then(success => {\n        if (success) {\n          this.getMsgCode(this.user.phone).then(data => {\n            if (data.ret === RET_CODE_MAP.OK) {\n              this.countdownVisible = true\n              this.$refs.fnCountdown.start()\n            }\n          })\n        } else {\n          this.$root.toast(this.validation.firstError('user.phone'), 'error')\n        }\n      })\n    },\n\n    onCountdownOver() {\n      this.countdownVisible = false\n    }\n  },\n\n  data() {\n    return {\n      countdownVisible: false,\n      user: {\n        UserinfoValLogin: {},\n        integraluserlevel: {},\n        phone: '',\n        code: ''\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.logo {\n  background: white;\n}\n\n.login-form {\n  // padding: 10px 0;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// Login.vue?52fcea3e","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".logo[data-v-66d2fb3a]{background:#fff}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true,\"autoprefixer\":false,\"sourceMap\":false}!./~/vue-loader/lib/style-rewriter.js?id=data-v-66d2fb3a&scoped=true!./~/sass-loader?{\"sourceMap\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/Login.vue\n// module id = 381\n// module chunks = 3","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"autoprefixer\\\":false,\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-66d2fb3a&scoped=true!../../node_modules/sass-loader/index.js?{\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Login.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"0d554c54\", content, true);\n// Hot Module Replacement\nif(module.hot) {\n // When the styles change, update the <style> tags\n if(!content.locals) {\n   module.hot.accept(\"!!../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"autoprefixer\\\":false,\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-66d2fb3a&scoped=true!../../node_modules/sass-loader/index.js?{\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Login.vue\", function() {\n     var newContent = require(\"!!../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"autoprefixer\\\":false,\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/style-rewriter.js?id=data-v-66d2fb3a&scoped=true!../../node_modules/sass-loader/index.js?{\\\"sourceMap\\\":false}!../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./Login.vue\");\n     if(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n     update(newContent);\n   });\n }\n // When the module is disposed, remove the <style> tags\n module.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"autoprefixer\":false,\"sourceMap\":false}!./~/vue-loader/lib/style-rewriter.js?id=data-v-66d2fb3a&scoped=true!./~/sass-loader?{\"sourceMap\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/views/Login.vue\n// module id = 395\n// module chunks = 3","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('section', [_vm._m(0), _c('form', {\n    staticClass: \"login-form\",\n    on: {\n      \"submit\": function($event) {\n        $event.preventDefault();\n        _vm.submit()\n      }\n    }\n  }, [_c('div', {\n    staticClass: \"fields\"\n  }, [_c('mt-field', {\n    attrs: {\n      \"label\": \"\",\n      \"placeholder\": \"请输入手机号\",\n      \"state\": _vm.getFieldState('user.phone')\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.showFieldError($event, 'user.phone')\n      }\n    },\n    model: {\n      value: (_vm.user.phone),\n      callback: function($$v) {\n        _vm.user.phone = $$v\n      },\n      expression: \"user.phone\"\n    }\n  }), _c('mt-field', {\n    attrs: {\n      \"label\": \"\",\n      \"placeholder\": \"请输入验证码\",\n      \"state\": _vm.getFieldState('user.code')\n    },\n    nativeOn: {\n      \"click\": function($event) {\n        _vm.showFieldError($event, 'user.code')\n      }\n    },\n    model: {\n      value: (_vm.user.code),\n      callback: function($$v) {\n        _vm.user.code = $$v\n      },\n      expression: \"user.code\"\n    }\n  }, [_c('mt-button', {\n    attrs: {\n      \"type\": \"default\",\n      \"disabled\": _vm.countdownVisible\n    },\n    on: {\n      \"click\": function($event) {\n        $event.stopPropagation();\n        $event.preventDefault();\n        _vm.toGetMsgCode()\n      }\n    }\n  }, [_c('span', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (!_vm.countdownVisible),\n      expression: \"!countdownVisible\"\n    }]\n  }, [_vm._v(\"发送验证码\")]), _c('fb-countdown', {\n    directives: [{\n      name: \"show\",\n      rawName: \"v-show\",\n      value: (_vm.countdownVisible),\n      expression: \"countdownVisible\"\n    }],\n    ref: \"fnCountdown\",\n    on: {\n      \"countdown-over\": function($event) {\n        _vm.onCountdownOver()\n      }\n    }\n  })], 1)], 1)], 1), _c('div', {\n    staticClass: \"form-buttons\"\n  }, [_c('mt-button', {\n    staticClass: \"mint-button-block\",\n    attrs: {\n      \"type\": \"primary\",\n      \"size\": \"large\"\n    }\n  }, [_vm._v(\"登录\")])], 1)])])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"logo\"\n  }, [_c('img', {\n    attrs: {\n      \"src\": require(\"../assets/images/logo.jpg\")\n    }\n  }), _c('small', [_vm._v(\"免审核借款1000元\")])])\n}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?id=data-v-66d2fb3a!./~/vue-loader/lib/template-loader.js?raw&engine=pug!./~/vue-loader/lib/selector.js?type=template&index=0!./src/views/Login.vue\n// module id = 416\n// module chunks = 3"],"sourceRoot":""}