webpackJsonp([0,17],{351:function(n,e,t){t(427);var a=t(61)(t(382),t(412),"data-v-255f9644",null);a.options.__file="/Users/luxueyan/mine/github/hummingbird-h5-frontend/src/views/borrow/BorrowerInfo.vue",a.esModule&&Object.keys(a.esModule).some(function(n){return"default"!==n&&"__esModule"!==n})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] BorrowerInfo.vue: functional components are not supported with templates, they should use render functions."),n.exports=a.exports},358:function(n,e,t){"use strict";function a(n){return{idCard:n.Idcard,cardName:n.Cardname,bankCard:n.Bankcard,bankPhone:n.Bankphone,bank:n.Bankname,loanAmount:n.Loanamount,totalAmount:n.Totalamount,endDate:o()(n.Enddate).format("YYYY年MM月DD日"),startDate:o()(n.Startdate).format("YYYY年MM月DD日")}}var r=t(0),o=t.n(r);e.a=a},359:function(n,e,t){"use strict";var a=t(64),r=t.n(a),o=r.a.Validator;e.a={methods:{Validator:o,validate:o.value,getFieldState:function(n){return this.validation.hasError(n)?"error":this.validation.isPassed(n)?"success":""},showFieldError:function(n,e){var t=n.target;t.classList.contains("mintui-field-error")&&t.parentNode.classList.contains("mint-field-state")&&this.$root.toast(this.validation.firstError(e),"error")}}}},360:function(n,e,t){"use strict";var a="@@clickoutsideContext";e.a={bind:function(n,e,t){var r=function(e){t.context&&!n.contains(e.target)&&t.context[n[a].methodName]()};n[a]={documentHandler:r,methodName:e.expression,arg:e.arg||"click"},document.addEventListener(n[a].arg,r)},update:function(n,e){n[a].methodName=e.expression},unbind:function(n){document.removeEventListener(n[a].arg,n[a].documentHandler)},install:function(n){n.directive("clickoutside",{bind:this.bind,unbind:this.unbind})}}},362:function(n,e,t){"use strict";e.a={methods:{showSupportBanks:function(){this.$root.MessageBox("支持银行列表：","农业银行、中国银行、工商银行、建设银行、交通银行、兴业银行、中信银行、平安银行、光大银行、上海银行")}}}},365:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,r=t(366),o=t.n(r),i=t(218),s=t.n(i),l=t(38),d=(t.n(l),t(37)),u=t.n(d),c=t(70),f=(t.n(c),t(69)),m=t.n(f),h=t(360);e.default={name:"fb-field",components:(a={},s()(a,m.a.name,m.a),s()(a,u.a.name,u.a),a),data:function(){return{active:!1,currentValue:this.value}},directives:{Clickoutside:h.a},props:{type:{type:String,default:"text"},rows:String,label:String,placeholder:String,readonly:Boolean,disabled:Boolean,disableClear:Boolean,state:{type:String,default:"default"},value:{},attr:Object},methods:{doCloseActive:function(){this.active=!1},handleInput:function(n){this.currentValue=n.target.value},handleClear:function(){this.disabled||this.readonly||(this.currentValue="")}},watch:{value:function(n){this.currentValue=n},currentValue:function(n){this.$emit("input",n)},attr:{immediate:!0,handler:function(n){var e=this;this.$nextTick(function(){[e.$refs.input,e.$refs.textarea].forEach(function(e){e&&n&&o()(n).map(function(t){return e.setAttribute(t,n[t])})})})}}}}},366:function(n,e,t){n.exports={default:t(367),__esModule:!0}},367:function(n,e,t){t(369),n.exports=t(8).Object.keys},368:function(n,e,t){var a=t(25),r=t(8),o=t(36);n.exports=function(n,e){var t=(r.Object||{})[n]||Object[n],i={};i[n]=e(t),a(a.S+a.F*o(function(){t(1)}),"Object",i)}},369:function(n,e,t){var a=t(67),r=t(66);t(368)("keys",function(){return function(n){return r(a(n))}})},372:function(n,e,t){var a=t(61)(t(365),t(374),null,null);a.options.__file="/Users/luxueyan/mine/github/hummingbird-h5-frontend/src/components/FbField.vue",a.esModule&&Object.keys(a.esModule).some(function(n){return"default"!==n&&"__esModule"!==n})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] FbField.vue: functional components are not supported with templates, they should use render functions."),n.exports=a.exports},374:function(n,e,t){n.exports={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("mt-cell",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:n.doCloseActive,expression:"doCloseActive"}],staticClass:"mint-field",class:[{"is-textarea":"textarea"===n.type,"is-nolabel":!n.label}],attrs:{title:n.label}},[t("template",{slot:"title"},[n._t("label")],2),n._v(" "),"textarea"===n.type?t("textarea",{directives:[{name:"model",rawName:"v-model",value:n.currentValue,expression:"currentValue"}],ref:"textarea",staticClass:"mint-field-core",attrs:{placeholder:n.placeholder,rows:n.rows,disabled:n.disabled,readonly:n.readonly},domProps:{value:n.currentValue},on:{change:function(e){n.$emit("change",n.currentValue)},input:function(e){e.target.composing||(n.currentValue=e.target.value)}}}):t("input",{ref:"input",staticClass:"mint-field-core",attrs:{placeholder:n.placeholder,number:"number"===n.type,type:n.type,disabled:n.disabled,readonly:n.readonly},domProps:{value:n.currentValue},on:{change:function(e){n.$emit("change",n.currentValue)},focus:function(e){n.active=!0},input:n.handleInput}}),n._v(" "),n.disableClear?n._e():t("div",{directives:[{name:"show",rawName:"v-show",value:n.currentValue&&"textarea"!==n.type&&n.active,expression:"currentValue && type !== 'textarea' && active"}],staticClass:"mint-field-clear",on:{click:n.handleClear}},[t("i",{staticClass:"mintui mintui-field-error"})]),n._v(" "),n.state?t("span",{staticClass:"mint-field-state",class:["is-"+n.state]},[t("i",{staticClass:"mintui",class:["mintui-field-"+n.state]})]):n._e(),n._v(" "),t("div",{staticClass:"mint-field-other"},[n._t("default")],2)],2)},staticRenderFns:[]},n.exports.render._withStripped=!0},382:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t(65),r=t.n(a),o=t(62),i=t.n(o),s=t(217),l=t.n(s),d=t(359),u=t(362),c=t(35),f=t(15),m=t(68),h=t(358),p=t(63),v=t(372),b=t.n(v),C=t(0),k=t.n(C);e.default={mixins:[d.a,u.a],components:{FbField:b.a},beforeRouteEnter:function(n,e,a){c.a.get().then(function(n){return n.json()}).then(function(n){a(function(e){n.data.content&&(e.contractInfoHasHistory=!0,l()(e.model,t.i(h.a)(n.data.content)),e.bankCardForShow=e.model.bankCard.replace(/\d{4}(?=(\d{1,4}))/g,"$& "))})})},watch:{bankCardForShow:function(){this.model.bankCard=this.bankCardForShow=this.bankCardForShow.replace(/\s/g,""),this.bankCardForShow=this.bankCardForShow.replace(/\d{4}(?=(\d{1,4}))/g,"$& ")}},validators:{"model.idCard":function(n){return this.validate(n).required("请输入身份证号").length(18,"请正确输入18位身份证").custom(function(){if(!t.i(m.c)(n))return"请正确输入二代18位身份证"})},"model.bankCard":function(n){return this.validate(n).required("请输入银行卡号").custom(function(){if(!t.i(m.b)(n))return"请正确输入16-19位银行卡号"})},"model.bankPhone":function(n){return this.validate(n).required("请输入手机号").digit("请正确输入手机号").regex("^1[3-9]\\d{9}$","请正确输入手机号")},"model.bank":function(n){return this.validate(n).required()}},methods:i()({},t.i(p.c)(["updateStateCode"]),{showServiceChargeTip:function(){var n=this.user.integraluserlevel,e=n.Creditmoney,t=n.Managemoney;this.$root.MessageBox("服务费包含","\n        <table>\n          <tr><th>审核费用：</th><td>"+e+"元</td></tr>\n          <tr><th>账户管理费：</th><td>"+t+"元</td></tr>\n        </table>")},getBank:function(){var n=this;this.validation.isPassed("model.bankCard")&&c.b.get({bankCard:this.model.bankCard}).then(function(n){return n.json()}).then(function(e){n.model.bank=e.data.bank,n.bankCardNotSupported=e.ret===f.a.BANK_CARD_NOT_SUPPORTED})},submit:function(){var n=this;if(this.bankCardNotSupported)return void this.$root.toast("抱歉，您选择的银行卡不支持！","error");this.$validate().then(function(e){e?c.j.get(n.model).then(function(n){return n.json()}).then(function(e){e.ret===f.a.OK&&(n.updateStateCode(f.b.CONTRACT_INFO_FILLED),n.$router.push({name:"signature"}))}):n.$root.toast(n.validation.firstError(),"error")})},goChangeBankCard:function(){this.$router.push({name:"changeBankCardStep1"})}}),computed:i()({},t.i(p.b)(["stateCode"]),{serviceCharge:function(){var n=this.user.integraluserlevel;return n.Creditmoney+n.Managemoney},virtualMoney:function(){var n=this.user.integraluserlevel;return n.Limit-n.Creditmoney-n.Managemoney}}),data:function(){var n=JSON.parse(r()(this.$store.getters.user));return{qmNoteVisible:+k()().toDate()<=+new Date("2017-04-05 12:00:00"),contractInfoHasHistory:!1,bankCardNotSupported:!1,countdownVisible:!1,bankCardForShow:"",model:{name:n.UserinfoValLogin.Name,idCard:null,bankCard:null,bank:"",bankPhone:null},user:n}}}},391:function(n,e,t){e=n.exports=t(1)(),e.push([n.i,"\n.loan-agreement[data-v-255f9644] {\n  margin-top: 5px;\n}\nsmall.note[data-v-255f9644] {\n  display: block;\n  padding: 10px;\n  color: #888;\n  line-height: 1.8em;\n}\n","",{version:3,sources:["/Users/luxueyan/mine/github/hummingbird-h5-frontend/src/views/borrow/src/views/borrow/BorrowerInfo.vue"],names:[],mappings:";AA8NA;EACE,gBAAe;CAChB;AAED;EAEI,eAAc;EACd,cAAa;EACb,YAAW;EACX,mBAAkB;CACnB",file:"BorrowerInfo.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.loan-agreement {\n  margin-top: 5px;\n}\n\nsmall {\n  &.note {\n    display: block;\n    padding: 10px;\n    color: #888;\n    line-height: 1.8em;\n  }\n}\n"],sourceRoot:""}])},412:function(n,e,t){n.exports={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"borrow-info"},[t("form",{staticClass:"borrow-form",on:{submit:function(e){e.preventDefault(),n.submit()}}},[t("div",{staticClass:"fields-header"},[n._v("借款方案")]),t("div",{staticClass:"fields"},[t("mt-cell",{attrs:{title:"借款金额",value:n._f("fbCurrency")(n.user.integraluserlevel.Limit,"","元")}}),t("mt-cell",{attrs:{title:"借款天数",value:n._f("fbAppend")(n.user.product.Length,"天")}}),t("mt-cell",{attrs:{value:n._f("fbCurrency")(n.serviceCharge,"","元")}},[t("span",{slot:"title"},[n._v("服务费"),t("i",{staticClass:"iconfont ui-icon-info",on:{click:n.showServiceChargeTip}})])]),t("mt-cell",{attrs:{title:"实际到账",value:n._f("fbCurrency")(n.virtualMoney,"","元")}})],1),t("div",{staticClass:"fields-header"},[n._v("账户信息"),n.contractInfoHasHistory?n._e():t("small",[t("i",{staticClass:"iconfont ui-icon-warn"}),n._v("请填写您的真实信息，否则会影响借款。")])]),t("div",{staticClass:"fields"},[t("mt-cell",{attrs:{title:"姓名",value:n._f("fbFalse")(n.user.UserinfoValLogin.Name)}}),n.contractInfoHasHistory?n._e():[t("mt-field",{attrs:{label:"身份证号",placeholder:"请输入身份证号",state:n.getFieldState("model.idCard")},nativeOn:{click:function(e){n.showFieldError(e,"model.idCard")}},model:{value:n.model.idCard,callback:function(e){n.model.idCard=e},expression:"model.idCard"}}),t("fb-field",{directives:[{name:"mt-field-blur",rawName:"v-mt-field-blur",value:{blur:n.getBank},expression:"{blur:getBank}"}],attrs:{label:"银行卡号",placeholder:"请输入银行卡号",state:n.getFieldState("model.bankCard")},nativeOn:{click:function(e){n.showFieldError(e,"model.bankCard")}},model:{value:n.bankCardForShow,callback:function(e){n.bankCardForShow=e},expression:"bankCardForShow"}},[t("span",{slot:"label"},[n._v("银行卡号"),t("i",{staticClass:"iconfont ui-icon-info",on:{click:function(e){n.showSupportBanks()}}})])]),t("input",{directives:[{name:"model",rawName:"v-model",value:n.model.bankCard,expression:"model.bankCard"}],attrs:{type:"hidden"},domProps:{value:n.model.bankCard},on:{input:function(e){e.target.composing||(n.model.bankCard=e.target.value)}}}),t("mt-cell",{attrs:{title:"开户行",value:n._f("fbFalse")(n.model.bank)}}),t("mt-field",{attrs:{label:"银行预留手机号",placeholder:"请输入银行预留手机号",state:n.getFieldState("model.bankPhone")},nativeOn:{click:function(e){n.showFieldError(e,"model.bankPhone")}},model:{value:n.model.bankPhone,callback:function(e){n.model.bankPhone=e},expression:"model.bankPhone"}})],n.contractInfoHasHistory?[t("mt-cell",{attrs:{title:"身份证号",value:n.model.idCard}}),t("mt-cell",{attrs:{title:"银行卡号"}},[t("span",[n._v(n._s(n.bankCardForShow))])]),t("mt-cell",{attrs:{title:"开户行",value:n._f("fbFalse")(n.model.bank)}}),t("mt-cell",{attrs:{title:"银行预留手机号",value:n.model.bankPhone}}),t("mt-cell",{nativeOn:{click:function(e){n.goChangeBankCard()}}},[t("a",{staticClass:"small"},[n._v("变更银行卡")])])]:n._e()],2),t("div",{staticClass:"form-buttons fixed"},[t("mt-button",{staticClass:"mint-button-block",attrs:{type:"primary",size:"large"}},[n._v("立即提款")])],1)])])},staticRenderFns:[]},n.exports.render._withStripped=!0},427:function(n,e,t){var a=t(391);"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t(3)("370add27",a,!1)}});
//# sourceMappingURL=0.f87e093feadaa50bdeb6.js.map