webpackJsonp([1,17],{349:function(n,e,t){t(436);var a=t(61)(t(380),t(421),null,null);a.options.__file="/Users/luxueyan/mine/github/hummingbird-h5-frontend/src/views/account/ChangeBankCardStep2.vue",a.esModule&&Object.keys(a.esModule).some(function(n){return"default"!==n&&"__esModule"!==n})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] ChangeBankCardStep2.vue: functional components are not supported with templates, they should use render functions."),n.exports=a.exports},358:function(n,e,t){"use strict";function a(n){return{idCard:n.Idcard,cardName:n.Cardname,bankCard:n.Bankcard,bankPhone:n.Bankphone,bank:n.Bankname,loanAmount:n.Loanamount,totalAmount:n.Totalamount,endDate:r()(n.Enddate).format("YYYY年MM月DD日"),startDate:r()(n.Startdate).format("YYYY年MM月DD日")}}var o=t(0),r=t.n(o);e.a=a},359:function(n,e,t){"use strict";var a=t(64),o=t.n(a),r=o.a.Validator;e.a={methods:{Validator:r,validate:r.value,getFieldState:function(n){return this.validation.hasError(n)?"error":this.validation.isPassed(n)?"success":""},showFieldError:function(n,e){var t=n.target;t.classList.contains("mintui-field-error")&&t.parentNode.classList.contains("mint-field-state")&&this.$root.toast(this.validation.firstError(e),"error")}}}},360:function(n,e,t){"use strict";var a="@@clickoutsideContext";e.a={bind:function(n,e,t){var o=function(e){t.context&&!n.contains(e.target)&&t.context[n[a].methodName]()};n[a]={documentHandler:o,methodName:e.expression,arg:e.arg||"click"},document.addEventListener(n[a].arg,o)},update:function(n,e){n[a].methodName=e.expression},unbind:function(n){document.removeEventListener(n[a].arg,n[a].documentHandler)},install:function(n){n.directive("clickoutside",{bind:this.bind,unbind:this.unbind})}}},362:function(n,e,t){"use strict";e.a={methods:{showSupportBanks:function(){this.$root.MessageBox("支持银行列表：","农业银行、中国银行、工商银行、建设银行、交通银行、兴业银行、中信银行、平安银行、光大银行、上海银行")}}}},365:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,o=t(366),r=t.n(o),i=t(218),s=t.n(i),l=t(38),d=(t.n(l),t(37)),c=t.n(d),u=t(70),h=(t.n(u),t(69)),p=t.n(h),m=t(360);e.default={name:"fb-field",components:(a={},s()(a,p.a.name,p.a),s()(a,c.a.name,c.a),a),data:function(){return{active:!1,currentValue:this.value}},directives:{Clickoutside:m.a},props:{type:{type:String,default:"text"},rows:String,label:String,placeholder:String,readonly:Boolean,disabled:Boolean,disableClear:Boolean,state:{type:String,default:"default"},value:{},attr:Object},methods:{doCloseActive:function(){this.active=!1},handleInput:function(n){this.currentValue=n.target.value},handleClear:function(){this.disabled||this.readonly||(this.currentValue="")}},watch:{value:function(n){this.currentValue=n},currentValue:function(n){this.$emit("input",n)},attr:{immediate:!0,handler:function(n){var e=this;this.$nextTick(function(){[e.$refs.input,e.$refs.textarea].forEach(function(e){e&&n&&r()(n).map(function(t){return e.setAttribute(t,n[t])})})})}}}}},366:function(n,e,t){n.exports={default:t(367),__esModule:!0}},367:function(n,e,t){t(369),n.exports=t(8).Object.keys},368:function(n,e,t){var a=t(25),o=t(8),r=t(36);n.exports=function(n,e){var t=(o.Object||{})[n]||Object[n],i={};i[n]=e(t),a(a.S+a.F*r(function(){t(1)}),"Object",i)}},369:function(n,e,t){var a=t(67),o=t(66);t(368)("keys",function(){return function(n){return o(a(n))}})},372:function(n,e,t){var a=t(61)(t(365),t(374),null,null);a.options.__file="/Users/luxueyan/mine/github/hummingbird-h5-frontend/src/components/FbField.vue",a.esModule&&Object.keys(a.esModule).some(function(n){return"default"!==n&&"__esModule"!==n})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] FbField.vue: functional components are not supported with templates, they should use render functions."),n.exports=a.exports},374:function(n,e,t){n.exports={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("mt-cell",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:n.doCloseActive,expression:"doCloseActive"}],staticClass:"mint-field",class:[{"is-textarea":"textarea"===n.type,"is-nolabel":!n.label}],attrs:{title:n.label}},[t("template",{slot:"title"},[n._t("label")],2),n._v(" "),"textarea"===n.type?t("textarea",{directives:[{name:"model",rawName:"v-model",value:n.currentValue,expression:"currentValue"}],ref:"textarea",staticClass:"mint-field-core",attrs:{placeholder:n.placeholder,rows:n.rows,disabled:n.disabled,readonly:n.readonly},domProps:{value:n.currentValue},on:{change:function(e){n.$emit("change",n.currentValue)},input:function(e){e.target.composing||(n.currentValue=e.target.value)}}}):t("input",{ref:"input",staticClass:"mint-field-core",attrs:{placeholder:n.placeholder,number:"number"===n.type,type:n.type,disabled:n.disabled,readonly:n.readonly},domProps:{value:n.currentValue},on:{change:function(e){n.$emit("change",n.currentValue)},focus:function(e){n.active=!0},input:n.handleInput}}),n._v(" "),n.disableClear?n._e():t("div",{directives:[{name:"show",rawName:"v-show",value:n.currentValue&&"textarea"!==n.type&&n.active,expression:"currentValue && type !== 'textarea' && active"}],staticClass:"mint-field-clear",on:{click:n.handleClear}},[t("i",{staticClass:"mintui mintui-field-error"})]),n._v(" "),n.state?t("span",{staticClass:"mint-field-state",class:["is-"+n.state]},[t("i",{staticClass:"mintui",class:["mintui-field-"+n.state]})]):n._e(),n._v(" "),t("div",{staticClass:"mint-field-other"},[n._t("default")],2)],2)},staticRenderFns:[]},n.exports.render._withStripped=!0},380:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t(217),o=t.n(a),r=t(62),i=t.n(r),s=t(359),l=t(362),d=t(372),c=t.n(d),u=t(35),h=t(15),p=t(68),m=t(358),f=t(63);e.default={mixins:[s.a,l.a],components:{FbField:c.a},beforeRouteEnter:function(n,e,a){u.a.get().then(function(n){return n.json()}).then(function(n){var e=t.i(m.a)(n.data.content);a(function(t){n.data.content&&(t.contractInfoHasHistory=!0,t.placeholders.bankCard=e.bankCard.replace(/\d{4}(?=(\d{1,4}))/g,"$& "),t.placeholders.bankPhone=e.bankPhone,t.model.bankName=e.bank)})})},validators:{"model.bankCard":function(n){return this.validate(n).required("请输入银行卡号").custom(function(){if(!t.i(p.b)(n))return"请正确输入16-19位银行卡号"})},"model.bankPhone":function(n){return this.validate(n).required("请输入手机号").digit("请正确输入手机号").regex("^1[3-9]\\d{9}$","请正确输入手机号")},"model.bankName":function(n){return this.validate(n).required()}},watch:{bankCardForShow:function(){this.model.bankCard=this.bankCardForShow=this.bankCardForShow.replace(/\s/g,""),this.bankCardForShow=this.bankCardForShow.replace(/\d{4}(?=(\d{1,4}))/g,"$& ")}},methods:i()({},t.i(f.c)(["updateUser"]),{getBank:function(){var n=this;this.validation.isPassed("model.bankCard")&&u.b.get({bankCard:this.model.bankCard}).then(function(n){return n.json()}).then(function(e){n.model.bankName=e.data.bank,n.bankCardNotSupported=e.ret===h.a.BANK_CARD_NOT_SUPPORTED})},submit:function(){var n=this;if(this.bankCardNotSupported)return void this.$root.toast("抱歉，您选择的银行卡不支持！","error");this.model.bankCard||(this.bankCardForShow=this.placeholders.bankCard,this.model.bankCard=this.placeholders.bankCard.replace(/\s/g,"")),this.model.bankPhone||(this.model.bankPhone=this.placeholders.bankPhone),this.$validate().then(function(e){e?u.c.save(n.model).then(function(n){return n.json()}).then(function(e){e.ret===h.a.OK&&(n.updateUser(o()({},n.user,n.model,{bank:n.model.bankName})),n.$router.push({name:"changeBankCardStep3"}))}):n.$root.toast(n.validation.firstError(),"error")})}}),computed:i()({},t.i(f.b)(["user"])),data:function(){return{bankCardNotSupported:!1,bankCardForShow:"",placeholders:{bankCard:"",bankPhone:null},model:{bankCard:"",bankPhone:null,bankName:""}}}}},400:function(n,e,t){e=n.exports=t(1)(),e.push([n.i,"\n.change-bank-card-form input::-moz-placeholder {\n  color: #c5c9d2;\n  font-size: 14px;\n  opacity: 1;\n}\n.change-bank-card-form input:-ms-input-placeholder {\n  color: #c5c9d2;\n  font-size: 14px;\n}\n.change-bank-card-form input::-webkit-input-placeholder {\n  color: #c5c9d2;\n  font-size: 14px;\n}\n","",{version:3,sources:["/Users/luxueyan/mine/github/hummingbird-h5-frontend/src/views/account/src/views/account/ChangeBankCardStep2.vue"],names:[],mappings:";AA8JA;EAEI,eAAc;EACd,gBAAe;EACf,WAAU;CACX;AALH;EAOI,eAAc;EACd,gBAAe;CAChB;AATH;EAWI,eAAc;EACd,gBAAe;CAChB",file:"ChangeBankCardStep2.vue",sourcesContent:["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.change-bank-card-form {\n  input::-moz-placeholder {\n    color: #c5c9d2;\n    font-size: 14px;\n    opacity: 1;\n  }\n  input:-ms-input-placeholder {\n    color: #c5c9d2;\n    font-size: 14px;\n  }\n  input::-webkit-input-placeholder {\n    color: #c5c9d2;\n    font-size: 14px;\n  }\n}\n"],sourceRoot:""}])},421:function(n,e,t){n.exports={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("section",[t("form",{staticClass:"change-bank-card-form",on:{submit:function(e){e.preventDefault(),n.submit()}}},[t("div",{staticClass:"fields-header"},[n._v("更新银行卡信息")]),t("div",{staticClass:"fields"},[t("fb-field",{directives:[{name:"mt-field-blur",rawName:"v-mt-field-blur",value:{blur:n.getBank},expression:"{blur:getBank}"}],attrs:{label:"银行卡号",placeholder:n.placeholders.bankCard,state:n.getFieldState("model.bankCard")},nativeOn:{click:function(e){n.showFieldError(e,"model.bankCard")}},model:{value:n.bankCardForShow,callback:function(e){n.bankCardForShow=e},expression:"bankCardForShow"}},[t("span",{slot:"label"},[n._v("银行卡号"),t("i",{staticClass:"iconfont ui-icon-info",on:{click:function(e){n.showSupportBanks()}}})])]),t("input",{directives:[{name:"model",rawName:"v-model",value:n.model.bankCard,expression:"model.bankCard"}],attrs:{type:"hidden"},domProps:{value:n.model.bankCard},on:{input:function(e){e.target.composing||(n.model.bankCard=e.target.value)}}}),t("mt-field",{attrs:{label:"银行预留手机号",placeholder:n.placeholders.bankPhone,state:n.getFieldState("model.bankPhone")},nativeOn:{click:function(e){n.showFieldError(e,"model.bankPhone")}},model:{value:n.model.bankPhone,callback:function(e){n.model.bankPhone=e},expression:"model.bankPhone"}}),t("mt-cell",{attrs:{title:"开户行",value:n._f("fbFalse")(n.model.bankName)}})],1),t("div",{staticClass:"form-buttons"},[t("mt-button",{staticClass:"mint-button-block",attrs:{type:"primary",size:"large"}},[n._v("下一步")])],1)])])},staticRenderFns:[]},n.exports.render._withStripped=!0},436:function(n,e,t){var a=t(400);"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t(3)("6b24d6b1",a,!1)}});
//# sourceMappingURL=1.eb153cb1de10f086ca7c.js.map